name: Build ESP-IDF Project

on: 
  push:
    branches: [ main ]  # Replace 'main' with your desired branch

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Run Docker to Build ESP-IDF Project
        uses: addnab/docker-run-action@v3
        with:
          image: espressif/idf:release-v4.4
          options: -v ${{ github.workspace }}:/project -w /project -u $(id -u):$(id -g) -e HOME=/tmp
          run: idf.py build
